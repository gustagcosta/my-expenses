{"version":3,"sources":["services/storage.ts","services/api.ts","contexts/AuthContext.tsx","components/Layout.tsx","pages/IndexPage.tsx","components/ErrorAlert.tsx","pages/SignInPage.tsx","pages/SignUpPage.tsx","App.tsx","index.tsx"],"names":["getToken","localStorage","getItem","storeToken","token","setItem","storeUser","user","JSON","stringify","api","url","method","body","a","headers","Accept","fetch","response","AuthContext","createContext","AuthProvider","children","useState","parse","setUser","email","password","status","json","message","Provider","value","signIn","logout","removeItem","Layout","title","useContext","history","useHistory","anchorEl","setAnchorEl","open","Boolean","handleClick","event","currentTarget","handleClose","document","authItens","MenuItem","onClick","console","log","ListItemIcon","push","publicItens","to","style","textDecoration","color","AppBar","position","Toolbar","Typography","variant","component","sx","flexGrow","name","IconButton","size","edge","aria-label","mr","aria-controls","aria-haspopup","aria-expanded","undefined","align","Fab","margin","top","right","bottom","left","id","Menu","onClose","MenuListProps","map","i","Container","maxWidth","IndexPage","useEffect","ErrorAlert","type","error","Alert","action","fontSize","severity","SignInPage","setError","useForm","register","handleSubmit","data","Box","marginTop","display","flexDirection","alignItems","onSubmit","noValidate","mt","TextField","required","fullWidth","label","autoComplete","autoFocus","Button","mb","Grid","width","SignUp","PrivateRoute","Component","rest","render","props","pathname","state","from","location","App","darkTheme","createTheme","palette","mode","ThemeProvider","theme","CssBaseline","path","exact","SignUpPage","ReactDOM","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.f694701a.chunk.js","sourcesContent":["import { User } from '../interfaces'\n\nexport const getToken = () => localStorage.getItem('TOKEN_KEY')\n\nexport const getUser = () => JSON.parse(localStorage.getItem('USER') as string)\n\nexport const storeToken = (token: string) =>\n  localStorage.setItem('TOKEN_KEY', token)\n\nexport const storeUser = (user: User) =>\n  localStorage.setItem('USER', JSON.stringify(user))\n\nexport const clearStorage = () => {\n  localStorage.removeItem('TOKEN_KEY')\n  localStorage.removeItem('USER')\n}\n","import { getToken } from './storage'\n\nasync function api(url: string, method: string, body: object) {\n  const headers = {\n    Accept: 'application/json',\n    'Content-Type': 'application/json',\n  }\n\n  const token = getToken()\n\n  if (token) {\n    headers['Authorization'] = `Bearer ${token}`\n  }\n\n  const response = await fetch(`${url}`, {\n    headers,\n    method,\n    body: JSON.stringify(body),\n  })\n\n  return response\n}\n\nexport { api }\n","import { createContext, useEffect, useState } from 'react'\nimport { api } from '../services/api'\nimport { User } from '../interfaces'\nimport {\n  clearStorage,\n  getToken,\n  getUser,\n  storeToken,\n  storeUser,\n} from '../services/storage'\n\ntype SignInData = {\n  email: string\n  password: string\n}\n\ntype AuthContextType = {\n  user: User\n  signIn: (data: SignInData) => Promise<void>\n  logout: () => void\n}\n\nexport const AuthContext = createContext({} as AuthContextType)\n\nexport function AuthProvider({ children }) {\n  const [user, setUser] = useState<User | null>(getUser())\n\n  async function signIn({ email, password }: SignInData) {\n    try {\n      const response = await api(`/api/v1/login`, 'POST', {\n        email,\n        password,\n      })\n\n      if (response.status === 200) {\n        const { user, token } = await response.json()\n\n        storeUser(user)\n        storeToken(token)\n\n        setUser(user)\n      } else {\n        const error = await response.json()\n        throw error.message\n      }\n    } catch (error) {\n      throw error\n    }\n  }\n\n  function logout() {\n    clearStorage()\n    setUser(null)\n  }\n\n  return (\n    <AuthContext.Provider\n      value={{\n        user,\n        signIn,\n        logout,\n      }}\n    >\n      {children}\n    </AuthContext.Provider>\n  )\n}\n","import {\n  AppBar,\n  Container,\n  Toolbar,\n  Typography,\n  Link as LinkStyle,\n  Button,\n  Fab,\n  Menu,\n  MenuItem,\n  ListItemIcon,\n  IconButton,\n} from '@mui/material'\nimport { ReactNode, useContext, useState } from 'react'\nimport { Link, useHistory } from 'react-router-dom'\nimport { AuthContext } from '../contexts/AuthContext'\nimport MenuIcon from '@mui/icons-material/Menu'\nimport LogoutIcon from '@mui/icons-material/Logout'\nimport LoginIcon from '@mui/icons-material/Login'\nimport PersonAddIcon from '@mui/icons-material/PersonAdd'\nimport AccountCircleIcon from '@mui/icons-material/AccountCircle'\nimport {\n  BrowserView,\n  MobileView,\n  isBrowser,\n  isMobile,\n} from 'react-device-detect'\n\ntype Props = {\n  children?: ReactNode\n  title?: string\n}\n\nconst Layout = ({ children, title }: Props) => {\n  const { logout, user } = useContext(AuthContext)\n  const history = useHistory()\n\n  const [anchorEl, setAnchorEl] = useState(null)\n\n  const open = Boolean(anchorEl)\n\n  const handleClick = (event) => {\n    setAnchorEl(event.currentTarget)\n  }\n\n  const handleClose = () => {\n    setAnchorEl(null)\n  }\n\n  document.title = 'My Expenses ' + title\n\n  const handleLogout = () => {\n    logout()\n    history.push('/sign-in')\n  }\n\n  const authItens = [\n    <MenuItem onClick={() => console.log('need implementation')}>\n      <ListItemIcon>\n        <AccountCircleIcon />\n      </ListItemIcon>\n      Profile\n    </MenuItem>,\n    <MenuItem onClick={handleLogout}>\n      <ListItemIcon>\n        <LogoutIcon />\n      </ListItemIcon>\n      Logout\n    </MenuItem>,\n  ]\n\n  const publicItens = [\n    <MenuItem onClick={handleClose}>\n      <ListItemIcon>\n        <PersonAddIcon />\n      </ListItemIcon>\n      <Link to='/sign-up' style={{ textDecoration: 'none', color: 'inherit' }}>\n        Sign Up\n      </Link>\n    </MenuItem>,\n    <MenuItem onClick={handleClose}>\n      <ListItemIcon>\n        <LoginIcon />\n      </ListItemIcon>\n      <Link to='/sign-in' style={{ textDecoration: 'none', color: 'inherit' }}>\n        Sign In\n      </Link>\n    </MenuItem>,\n  ]\n\n  return (\n    <div>\n      <BrowserView>\n        <AppBar position='static'>\n          <Toolbar>\n            <Typography variant='h6' component='div' sx={{ flexGrow: 1 }}>\n              My Expenses {user && ` - ${user.name}`}\n            </Typography>\n            <IconButton\n              size='large'\n              edge='start'\n              color='inherit'\n              aria-label='menu'\n              sx={{ mr: 2 }}\n              aria-controls='basic-menu'\n              aria-haspopup='true'\n              aria-expanded={open ? 'true' : undefined}\n              onClick={handleClick}\n            >\n              <MenuIcon />\n            </IconButton>\n          </Toolbar>\n        </AppBar>\n      </BrowserView>\n      <MobileView>\n        <AppBar position='static'>\n          <Toolbar>\n            <Typography\n              variant='h6'\n              align='center'\n              component='div'\n              sx={{ flexGrow: 1 }}\n            >\n              My Expenses {user && ` - ${user.name}`}\n            </Typography>\n          </Toolbar>\n        </AppBar>\n        <Fab\n          size='small'\n          color='primary'\n          aria-label='add'\n          style={{\n            margin: 0,\n            top: 'auto',\n            right: 20,\n            bottom: 20,\n            left: 'auto',\n            position: 'fixed',\n          }}\n          id='basic-button'\n          aria-controls='basic-menu'\n          aria-haspopup='true'\n          aria-expanded={open ? 'true' : undefined}\n          onClick={handleClick}\n        >\n          <MenuIcon />\n        </Fab>\n      </MobileView>\n\n      <Menu\n        id='basic-menu'\n        anchorEl={anchorEl}\n        open={open}\n        onClose={handleClose}\n        MenuListProps={{\n          'aria-labelledby': 'basic-button',\n        }}\n      >\n        {user ? authItens.map((i) => i) : publicItens.map((i) => i)}\n      </Menu>\n\n      <Container component='main' maxWidth='xs'>\n        {children}\n      </Container>\n    </div>\n  )\n}\n\nexport default Layout\n","import { useContext, useEffect } from 'react'\nimport { useHistory } from 'react-router-dom'\nimport Layout from '../components/Layout'\nimport { AuthContext } from '../contexts/AuthContext'\n\nexport default function IndexPage() {\n  const { signIn, user } = useContext(AuthContext)\n  const history = useHistory()\n\n  useEffect(() => {\n    if (!user) {\n      history.push('/sign-in')\n    }\n  }, [])\n\n  return <Layout title='Index'></Layout>\n}\n","import { Alert, AlertColor, IconButton } from '@mui/material'\nimport CloseIcon from '@mui/icons-material/Close';\n\nconst ErrorAlert = ({ type = 'error' as AlertColor, error, handleClose }) => {\n  return (\n    <Alert\n      action={\n        <IconButton\n          aria-label='close'\n          color='inherit'\n          size='small'\n          onClick={handleClose}\n        >\n          <CloseIcon fontSize='inherit' />\n        </IconButton>\n      }\n      severity={type}\n    >\n      {error}\n    </Alert>\n  )\n}\n\nexport default ErrorAlert\n","import * as React from 'react'\nimport Avatar from '@mui/material/Avatar'\nimport Button from '@mui/material/Button'\nimport CssBaseline from '@mui/material/CssBaseline'\nimport TextField from '@mui/material/TextField'\nimport FormControlLabel from '@mui/material/FormControlLabel'\nimport Checkbox from '@mui/material/Checkbox'\nimport Link from '@mui/material/Link'\nimport Grid from '@mui/material/Grid'\nimport Box from '@mui/material/Box'\nimport LockOutlinedIcon from '@mui/icons-material/LockOutlined'\nimport Typography from '@mui/material/Typography'\nimport Container from '@mui/material/Container'\nimport { createTheme, ThemeProvider } from '@mui/material/styles'\nimport { useForm } from 'react-hook-form'\nimport { useContext, useEffect, useState } from 'react'\nimport Layout from '../components/Layout'\nimport { AuthContext } from '../contexts/AuthContext'\nimport { useHistory } from 'react-router'\nimport ErrorAlert from '../components/ErrorAlert'\n\nexport default function SignInPage() {\n  const [error, setError] = useState('')\n  const { register, handleSubmit } = useForm()\n  const { signIn, user } = useContext(AuthContext)\n  const history = useHistory()\n\n  useEffect(() => {\n    if (user) {\n      history.push('/')\n    }\n  }, [])\n\n  async function handleSignIn(data: any) {\n    try {\n      await signIn(data)\n      history.push('/')\n    } catch (error) {\n      console.error(error)\n      setError(error)\n    }\n  }\n\n  return (\n    <Layout title={'Login'}>\n      <Box\n        sx={{\n          marginTop: 8,\n          display: 'flex',\n          flexDirection: 'column',\n          alignItems: 'center',\n        }}\n      >\n        <Box\n          component='form'\n          onSubmit={handleSubmit(handleSignIn)}\n          noValidate\n          sx={{ mt: 1 }}\n        >\n          <TextField\n            margin='normal'\n            required\n            fullWidth\n            id='email'\n            label='Email Address'\n            name='email'\n            autoComplete='email'\n            autoFocus\n            {...register('email')}\n          />\n          <TextField\n            {...register('password')}\n            margin='normal'\n            required\n            fullWidth\n            name='password'\n            label='Password'\n            type='password'\n            id='password'\n            autoComplete='current-password'\n          />\n          <Button\n            type='submit'\n            fullWidth\n            variant='contained'\n            sx={{ mt: 3, mb: 2 }}\n          >\n            Sign In\n          </Button>\n          <Grid width={'100%'}>\n            {error && (\n              <ErrorAlert error={error} handleClose={() => setError(null)} />\n            )}\n          </Grid>\n        </Box>\n      </Box>\n    </Layout>\n  )\n}\n","import * as React from 'react'\nimport Avatar from '@mui/material/Avatar'\nimport Button from '@mui/material/Button'\nimport CssBaseline from '@mui/material/CssBaseline'\nimport TextField from '@mui/material/TextField'\nimport FormControlLabel from '@mui/material/FormControlLabel'\nimport Checkbox from '@mui/material/Checkbox'\nimport Link from '@mui/material/Link'\nimport Grid from '@mui/material/Grid'\nimport Box from '@mui/material/Box'\nimport LockOutlinedIcon from '@mui/icons-material/LockOutlined'\nimport Typography from '@mui/material/Typography'\nimport Container from '@mui/material/Container'\nimport { createTheme, ThemeProvider } from '@mui/material/styles'\nimport { useForm } from 'react-hook-form'\nimport { useContext, useEffect, useState } from 'react'\nimport Layout from '../components/Layout'\nimport { AuthContext } from '../contexts/AuthContext'\nimport { useHistory } from 'react-router'\nimport ErrorAlert from '../components/ErrorAlert'\nimport { api } from '../services/api'\n\nexport default function SignUp() {\n  const [error, setError] = useState(null)\n  const { register, handleSubmit } = useForm()\n  const history = useHistory()\n  const { user, signIn } = useContext(AuthContext)\n\n  useEffect(() => {\n    if (user) {\n      history.push('/')\n    }\n  }, [])\n\n  async function handleSignUp({ name, email, password }) {\n    setError('')\n\n    const response = await api(`/api/v1/register`, 'POST', {\n      name,\n      email,\n      password,\n    })\n\n    if (response.status === 200) {\n      await signIn({ email, password })\n      history.push('/')\n    } else {\n      const error = await response.json()\n      setError(error.message)\n    }\n  }\n\n  return (\n    <Layout title={'Login'}>\n      <Box\n        sx={{\n          marginTop: 8,\n          display: 'flex',\n          flexDirection: 'column',\n          alignItems: 'center',\n        }}\n      >\n        <Box\n          component='form'\n          onSubmit={handleSubmit(handleSignUp)}\n          noValidate\n          sx={{ mt: 1 }}\n        >\n          <TextField\n            margin='normal'\n            required\n            fullWidth\n            id='name'\n            label='Name'\n            name='name'\n            autoComplete='name'\n            autoFocus\n            {...register('name')}\n          />\n          <TextField\n            margin='normal'\n            required\n            fullWidth\n            id='email'\n            label='Email Address'\n            name='email'\n            autoComplete='email'\n            {...register('email')}\n          />\n          <TextField\n            margin='normal'\n            required\n            fullWidth\n            name='password'\n            label='Password'\n            type='password'\n            id='password'\n            autoComplete='current-password'\n            {...register('password')}\n          />\n          <Button\n            type='submit'\n            fullWidth\n            variant='contained'\n            sx={{ mt: 3, mb: 2 }}\n          >\n            Sign In\n          </Button>\n          <Grid width={'100%'}>\n            {error && (\n              <ErrorAlert error={error} handleClose={() => setError(null)} />\n            )}\n          </Grid>\n        </Box>\n      </Box>\n    </Layout>\n  )\n}\n","import { createTheme, ThemeProvider } from '@mui/material/styles'\nimport { useContext } from 'react'\nimport {\n  BrowserRouter as Router,\n  Redirect,\n  Route,\n  Switch,\n} from 'react-router-dom'\nimport { AuthContext } from './contexts/AuthContext'\nimport CssBaseline from '@mui/material/CssBaseline'\nimport { AuthProvider } from './contexts/AuthContext'\n\nimport IndexPage from './pages/IndexPage'\nimport SignInPage from './pages/SignInPage'\nimport SignUpPage from './pages/SignUpPage'\n\nimport './styles/global.css'\n\nfunction PrivateRoute({ component: Component, ...rest }) {\n  const { user } = useContext(AuthContext)\n\n  return (\n    <Route\n      {...rest}\n      render={(props) =>\n        user ? (\n          <Component {...props} />\n        ) : (\n          <Redirect\n            to={{ pathname: '/sign-in', state: { from: props.location } }}\n          />\n        )\n      }\n    />\n  )\n}\n\nexport default function App() {\n  const darkTheme = createTheme({\n    palette: {\n      mode: 'dark',\n    },\n  })\n  return (\n    <ThemeProvider theme={darkTheme}>\n      <CssBaseline />\n      <AuthProvider>\n        <Router>\n          <Switch>\n            <PrivateRoute path='/' component={IndexPage} exact />\n            <Route path='/sign-in' component={SignInPage} exact />\n            <Route path='/sign-up' component={SignUpPage} exact />\n          </Switch>\n        </Router>\n      </AuthProvider>\n    </ThemeProvider>\n  )\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n)\n"],"sourceRoot":""}