(this.webpackJsonpreactapp=this.webpackJsonpreactapp||[]).push([[0],{187:function(e,t,n){},188:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(48),i=n.n(c),s=n(39),o=n(146),l=n(143),u=n(252),j=n(20),d=n(64),b=n(15),p=n.n(b),x=n(23),O=n(8),m=function(){return localStorage.getItem("TOKEN_KEY")},h=function(e){return localStorage.setItem("TOKEN_KEY",e)},f=function(e){return localStorage.setItem("USER",JSON.stringify(e))};function g(e,t){return v.apply(this,arguments)}function v(){return(v=Object(x.a)(p.a.mark((function e(t,n){var a,r,c,i,s=arguments;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>2&&void 0!==s[2]?s[2]:null,r={Accept:"application/json","Content-Type":"application/json"},(c=m())&&(r.Authorization="Bearer ".concat(c)),e.next=6,fetch("".concat(t),{headers:r,method:n,body:a?JSON.stringify(a):null});case 6:return i=e.sent,e.abrupt("return",i);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var w=n(2),S=Object(a.createContext)({});function y(e){var t=e.children,n=Object(a.useState)(JSON.parse(localStorage.getItem("USER"))),r=Object(O.a)(n,2),c=r[0],i=r[1];function s(){return(s=Object(x.a)(p.a.mark((function e(t){var n,a,r,c,s,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.email,a=t.password,e.prev=1,e.next=4,g("/api/v1/login","POST",{email:n,password:a});case 4:if(200!==(r=e.sent).status){e.next=16;break}return e.next=8,r.json();case 8:c=e.sent,s=c.user,o=c.token,f(s),h(o),i(s),e.next=20;break;case 16:return e.next=18,r.json();case 18:throw e.sent.message;case 20:e.next=25;break;case 22:throw e.prev=22,e.t0=e.catch(1),e.t0;case 25:case"end":return e.stop()}}),e,null,[[1,22]])})))).apply(this,arguments)}return Object(w.jsx)(S.Provider,{value:{user:c,signIn:function(e){return s.apply(this,arguments)},logout:function(){localStorage.removeItem("TOKEN_KEY"),localStorage.removeItem("USER"),i(null)}},children:t})}var k=n(247),C=n(31),E=n(150),I=n(253),N=n(254),T=n(255),D=n(52),M=n(256),P=n(144),W=n(257),Y=n(110),z=n.n(Y),K=n(137),_=n.n(K),q=n(139),J=n.n(q),U=n(138),V=n.n(U),A=n(108),B=function(e){var t=e.children,n=e.title,r=Object(a.useContext)(S),c=r.logout,i=r.user,s=Object(j.g)(),o=Object(a.useState)(null),l=Object(O.a)(o,2),u=l[0],b=l[1],p=Boolean(u),x=function(e){b(e.currentTarget)},m=function(){b(null)};document.title="My Expenses "+n;var h=[Object(w.jsxs)(C.a,{onClick:function(){c(),s.push("/sign-in")},children:[Object(w.jsx)(E.a,{children:Object(w.jsx)(_.a,{})}),"Logout"]})],f=[Object(w.jsxs)(C.a,{onClick:m,children:[Object(w.jsx)(E.a,{children:Object(w.jsx)(V.a,{})}),Object(w.jsx)(d.b,{to:"/sign-up",style:{textDecoration:"none",color:"inherit"},children:"Sign Up"})]}),Object(w.jsxs)(C.a,{onClick:m,children:[Object(w.jsx)(E.a,{children:Object(w.jsx)(J.a,{})}),Object(w.jsx)(d.b,{to:"/sign-in",style:{textDecoration:"none",color:"inherit"},children:"Sign In"})]})];return Object(w.jsxs)("div",{children:[Object(w.jsx)(A.BrowserView,{children:Object(w.jsx)(I.a,{position:"static",children:Object(w.jsxs)(N.a,{children:[Object(w.jsxs)(T.a,{variant:"h6",component:"div",sx:{flexGrow:1},children:["My Expenses ",i&&" - ".concat(i.name)]}),Object(w.jsx)(D.a,{size:"large",edge:"start",color:"inherit","aria-label":"menu",sx:{mr:2},"aria-controls":"basic-menu","aria-haspopup":"true","aria-expanded":p?"true":void 0,onClick:x,children:Object(w.jsx)(z.a,{})})]})})}),Object(w.jsxs)(A.MobileView,{children:[Object(w.jsx)(I.a,{position:"static",children:Object(w.jsx)(N.a,{children:Object(w.jsxs)(T.a,{variant:"h6",align:"center",component:"div",sx:{flexGrow:1},children:["My Expenses ",i&&" - ".concat(i.name)]})})}),Object(w.jsx)(M.a,{size:"small",color:"primary","aria-label":"add",style:{margin:0,top:"auto",right:20,bottom:20,left:"auto",position:"fixed"},id:"basic-button","aria-controls":"basic-menu","aria-haspopup":"true","aria-expanded":p?"true":void 0,onClick:x,children:Object(w.jsx)(z.a,{})})]}),Object(w.jsx)(P.a,{id:"basic-menu",anchorEl:u,open:p,onClose:m,MenuListProps:{"aria-labelledby":"basic-button"},children:i?h.map((function(e){return e})):f.map((function(e){return e}))}),Object(w.jsx)(W.a,{component:"main",children:t})]})},L=n(142),G=n(249),R=n(140),F=n.n(R),H=function(e){var t=e.type,n=void 0===t?"error":t,a=e.error,r=e.handleClose;return Object(w.jsx)(G.a,{action:Object(w.jsx)(D.a,{"aria-label":"close",color:"inherit",size:"small",onClick:r,children:Object(w.jsx)(F.a,{fontSize:"inherit"})}),severity:n,children:a})},Q=n(250),X=n(141),Z=n.n(X),$=[{field:"id",headerName:"ID",width:300},{field:"description",headerName:"Description",width:300},{field:"expire_date",headerName:"Expire Date",width:200},{field:"value",headerName:"Value",width:100}];function ee(){var e=Object(a.useContext)(S),t=(e.signIn,e.user),n=Object(j.g)(),r=Object(a.useState)([]),c=Object(O.a)(r,2),i=c[0],s=c[1],o=Object(a.useState)([]),l=Object(O.a)(o,2),u=(l[0],l[1]),d=Object(a.useState)(null),b=Object(O.a)(d,2),m=b[0],h=b[1];Object(a.useEffect)((function(){t||n.push("/sign-in"),f()}),[n,t]);var f=function(){var e=Object(x.a)(p.a.mark((function e(){var t,n,a,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(""),e.next=3,g("/api/v1/bills","GET");case 3:if(200!==(t=e.sent).status){e.next=13;break}return e.next=7,t.json();case 7:n=e.sent,a=n.map((function(e){return{id:e.id,description:e.description,expire_date:Z()(e.expire_date).format("DD/MM/YYYY"),value:e.value}})),s(a),u(n),e.next=17;break;case 13:return e.next=15,t.json();case 15:r=e.sent,h(r.message);case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(w.jsxs)(B,{title:"Index",children:[Object(w.jsx)(Q.a,{width:"100%",children:Object(w.jsx)(L.a,{style:{marginTop:"15px"},rows:i,autoHeight:!0,disableSelectionOnClick:!0,columns:$,pageSize:10,rowsPerPageOptions:[5]})}),Object(w.jsx)(Q.a,{width:"100%",children:m&&Object(w.jsx)(H,{error:m,handleClose:function(){return h(null)}})})]})}var te=n(59),ne=n(81),ae=n(201),re=n(88);function ce(){var e=Object(a.useState)(""),t=Object(O.a)(e,2),n=t[0],r=t[1],c=Object(re.a)(),i=c.register,o=c.handleSubmit,l=Object(a.useContext)(S),u=l.signIn,d=l.user,b=Object(j.g)();function m(){return(m=Object(x.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u(t);case 3:b.push("/"),e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0),r(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}return Object(a.useEffect)((function(){d&&b.push("/")}),[]),Object(w.jsx)(B,{title:"Login",children:Object(w.jsx)(ae.a,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:Object(w.jsxs)(ae.a,{component:"form",onSubmit:o((function(e){return m.apply(this,arguments)})),noValidate:!0,sx:{mt:1},children:[Object(w.jsx)(ne.a,Object(s.a)({margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0},i("email"))),Object(w.jsx)(ne.a,Object(s.a)(Object(s.a)({},i("password")),{},{margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password"})),Object(w.jsx)(te.a,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"Sign In"}),Object(w.jsx)(Q.a,{width:"100%",children:n&&Object(w.jsx)(H,{error:n,handleClose:function(){return r(null)}})})]})})})}function ie(){var e=Object(a.useState)(null),t=Object(O.a)(e,2),n=t[0],r=t[1],c=Object(re.a)(),i=c.register,o=c.handleSubmit,l=Object(j.g)(),u=Object(a.useContext)(S),d=u.user,b=u.signIn;function m(){return(m=Object(x.a)(p.a.mark((function e(t){var n,a,c,i,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.name,a=t.email,c=t.password,r(""),e.next=4,g("/api/v1/register","POST",{name:n,email:a,password:c});case 4:if(200!==(i=e.sent).status){e.next=11;break}return e.next=8,b({email:a,password:c});case 8:l.push("/"),e.next=15;break;case 11:return e.next=13,i.json();case 13:s=e.sent,r(s.message);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){d&&l.push("/")}),[]),Object(w.jsx)(B,{title:"Login",children:Object(w.jsx)(ae.a,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:Object(w.jsxs)(ae.a,{component:"form",onSubmit:o((function(e){return m.apply(this,arguments)})),noValidate:!0,sx:{mt:1},children:[Object(w.jsx)(ne.a,Object(s.a)({margin:"normal",required:!0,fullWidth:!0,id:"name",label:"Name",name:"name",autoComplete:"name",autoFocus:!0},i("name"))),Object(w.jsx)(ne.a,Object(s.a)({margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email"},i("email"))),Object(w.jsx)(ne.a,Object(s.a)({margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password"},i("password"))),Object(w.jsx)(te.a,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"Sign Up"}),Object(w.jsx)(Q.a,{width:"100%",children:n&&Object(w.jsx)(H,{error:n,handleClose:function(){return r(null)}})})]})})})}n(187);function se(e){var t=e.component,n=Object(o.a)(e,["component"]),r=Object(a.useContext)(S).user;return Object(w.jsx)(j.b,Object(s.a)(Object(s.a)({},n),{},{render:function(e){return r?Object(w.jsx)(t,Object(s.a)({},e)):Object(w.jsx)(j.a,{to:{pathname:"/sign-in",state:{from:e.location}}})}}))}function oe(){var e=Object(l.a)({palette:{mode:"dark"}});return Object(w.jsxs)(u.a,{theme:e,children:[Object(w.jsx)(k.a,{}),Object(w.jsx)(y,{children:Object(w.jsx)(d.a,{children:Object(w.jsxs)(j.d,{children:[Object(w.jsx)(se,{path:"/",component:ee,exact:!0}),Object(w.jsx)(j.b,{path:"/sign-in",component:ce,exact:!0}),Object(w.jsx)(j.b,{path:"/sign-up",component:ie,exact:!0})]})})})]})}i.a.render(Object(w.jsx)(r.a.StrictMode,{children:Object(w.jsx)(oe,{})}),document.getElementById("root"))}},[[188,1,2]]]);
//# sourceMappingURL=main.ff78a8de.chunk.js.map