(this.webpackJsonpreactapp=this.webpackJsonpreactapp||[]).push([[0],{180:function(e,t,n){},181:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(50),s=n.n(c),i=n(31),o=n(142),l=n(139),u=n(256),j=n(23),b=n(40),d=n(18),x=n.n(d),O=n(21),p=n(9),h=function(){return localStorage.getItem("TOKEN_KEY")},f=function(e){return localStorage.setItem("TOKEN_KEY",e)},m=function(e){return localStorage.setItem("USER",JSON.stringify(e))};function v(e,t){return g.apply(this,arguments)}function g(){return(g=Object(O.a)(x.a.mark((function e(t,n){var a,r,c,s,i=arguments;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.length>2&&void 0!==i[2]?i[2]:null,r={Accept:"application/json","Content-Type":"application/json"},(c=h())&&(r.Authorization="Bearer ".concat(c)),e.next=6,fetch("".concat(t),{headers:r,method:n,body:a?JSON.stringify(a):null});case 6:return s=e.sent,e.abrupt("return",s);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var y=n(1),w=Object(a.createContext)({});function C(e){var t=e.children,n=Object(a.useState)(JSON.parse(localStorage.getItem("USER"))),r=Object(p.a)(n,2),c=r[0],s=r[1];function i(){return(i=Object(O.a)(x.a.mark((function e(t){var n,a,r,c,i,o;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.email,a=t.password,e.prev=1,e.next=4,v("/api/v1/login","POST",{email:n,password:a});case 4:if(200!==(r=e.sent).status){e.next=16;break}return e.next=8,r.json();case 8:c=e.sent,i=c.user,o=c.token,m(i),f(o),s(i),e.next=20;break;case 16:return e.next=18,r.json();case 18:throw e.sent.message;case 20:e.next=25;break;case 22:throw e.prev=22,e.t0=e.catch(1),e.t0;case 25:case"end":return e.stop()}}),e,null,[[1,22]])})))).apply(this,arguments)}return Object(y.jsx)(w.Provider,{value:{user:c,signIn:function(e){return i.apply(this,arguments)},logout:function(){localStorage.removeItem("TOKEN_KEY"),localStorage.removeItem("USER"),s(null)}},children:t})}var S=n(247),k=n(254),E=n(261),I=n(253),D=n(263),T=n(246),W=n(266),B=n(138),M=n.n(B),N=n(137),A=n.n(N),P=n(141),U=n(258),_=n(259),K=n(84),L=n(260),q=n(140),J=n(255),V=n(242),z=n(262),F=n(130),R=n.n(F),Y=n(132),G=n.n(Y),H=n(134),Q=n.n(H),X=n(133),Z=n.n(X),$=n(57);function ee(e){var t=e.children,n=e.title,r=Object(a.useContext)(w),c=r.logout,s=r.user,i=Object(j.g)(),o=Object(a.useState)(null),l=Object(p.a)(o,2),u=l[0],d=l[1],x=Boolean(u);document.title="My Expenses "+n;var O=function(){c(),i.push("/sign-in")};return Object(y.jsxs)("div",{children:[Object(y.jsx)(U.a,{position:"static",children:Object(y.jsxs)(_.a,{children:[Object(y.jsxs)(K.a,{variant:"h6",component:"div",sx:{flexGrow:1},children:["My Expenses ",s&&" - ".concat(s.name)]}),Object(y.jsx)($.BrowserView,{children:s&&[Object(y.jsx)(k.a,{onClick:O,sx:{color:"white",display:"inline-block"},children:"Logout"})]})]})}),Object(y.jsxs)($.MobileView,{children:[Object(y.jsx)(L.a,{size:"small",color:"primary",style:{margin:0,top:"auto",right:20,bottom:20,left:"auto",position:"fixed"},onClick:function(e){return d(e.currentTarget)},children:Object(y.jsx)(R.a,{})}),Object(y.jsx)(q.a,{id:"basic-menu",anchorEl:u,open:x,onClose:function(e){return d(null)},MenuListProps:{"aria-labelledby":"basic-button"},children:s?[Object(y.jsxs)(J.a,{onClick:O,children:[Object(y.jsx)(V.a,{children:Object(y.jsx)(G.a,{})}),"Logout"]})]:[Object(y.jsxs)(J.a,{onClick:function(e){return d(null)},children:[Object(y.jsx)(V.a,{children:Object(y.jsx)(Z.a,{})}),Object(y.jsx)(b.b,{to:"/sign-up",style:{textDecoration:"none",color:"inherit"},children:"Sign Up"})]}),Object(y.jsxs)(J.a,{onClick:function(e){return d(null)},children:[Object(y.jsx)(V.a,{children:Object(y.jsx)(Q.a,{})}),Object(y.jsx)(b.b,{to:"/sign-in",style:{textDecoration:"none",color:"inherit"},children:"Sign In"})]})]})]}),Object(y.jsx)(z.a,{component:"main",children:t})]})}var te=n(251),ne=n(135),ae=n.n(ne);function re(e){var t=e.type,n=void 0===t?"error":t,a=e.error,r=e.handleClose;return Object(y.jsx)(te.a,{action:Object(y.jsx)(D.a,{"aria-label":"close",color:"inherit",size:"small",onClick:r,children:Object(y.jsx)(ae.a,{fontSize:"inherit"})}),severity:n,children:a})}var ce=n(243),se=n(244),ie=n(264),oe=n(250),le=n(265),ue=n(249),je=n(245),be=n(248);function de(e){var t=e.open,n=e.handleClose,r=e.reload,c=e.edit,s=void 0===c?null:c,o=e.bill,l=void 0===o?null:o,u=Object(a.useState)(new Date),j=Object(p.a)(u,2),b=j[0],d=j[1],h=Object(a.useState)(""),f=Object(p.a)(h,2),m=f[0],g=f[1],w=Object(a.useState)(""),C=Object(p.a)(w,2),S=C[0],E=C[1],I=Object(a.useState)(""),D=Object(p.a)(I,2),T=D[0],W=D[1];Object(a.useEffect)((function(){s&&(d(new Date(l.expire_date)),E(l.value),W(l.description))}),[s,l]);var B=function(){var e=Object(O.a)(x.a.mark((function e(){var t,a,c,i,o;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(""),t=Object(P.a)(b,"yyyyMMdd"),a=s?"PUT":"POST",c=s?{id:l.id,expire_date:t,value:S,description:T}:{expire_date:t,value:S,description:T},e.next=6,v("/api/v1/bills",a,c);case 6:if(200!==(i=e.sent).status){e.next=13;break}M(),n(),r(),e.next=17;break;case 13:return e.next=15,i.json();case 15:o=e.sent,g(o.message);case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(){E(""),W(""),d(null),g("")};return Object(y.jsx)("div",{children:Object(y.jsxs)(ce.a,{open:t,onClose:n,fullWidth:!0,children:[Object(y.jsx)(se.a,{children:s?"Update Bill":"Create Bill"}),Object(y.jsxs)(ie.a,{children:[Object(y.jsx)(oe.a,{autoFocus:!0,margin:"dense",id:"description",label:"Description",type:"text",fullWidth:!0,variant:"standard",value:T,onChange:function(e){return W(e.target.value)}}),Object(y.jsx)(oe.a,{margin:"dense",id:"value",label:"Value",type:"text",fullWidth:!0,variant:"standard",value:S,onChange:function(e){return E(e.target.value)}}),Object(y.jsx)("br",{}),Object(y.jsx)("br",{}),Object(y.jsx)(je.b,{dateAdapter:ue.a,children:Object(y.jsx)(be.a,{label:"Expire Date",value:b,onChange:function(e){d(e)},renderInput:function(e){return Object(y.jsx)(oe.a,Object(i.a)({},e))}})})]}),Object(y.jsx)("div",{style:{padding:"15px"},children:m&&Object(y.jsx)(re,{error:m,handleClose:function(){return g(null)}})}),Object(y.jsxs)(le.a,{children:[Object(y.jsx)(k.a,{onClick:n,children:"Cancel"}),Object(y.jsx)(k.a,{onClick:B,children:s?"Save":"Create"})]})]})})}function xe(e){var t=e.open,n=e.handleClose,r=e.reload,c=e.bill,s=Object(a.useState)(""),i=Object(p.a)(s,2),o=i[0],l=i[1],u=function(){var e=Object(O.a)(x.a.mark((function e(){var t,a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(""),e.next=3,v("/api/v1/bills/".concat(c.id),"DELETE");case 3:if(200!==(t=e.sent).status){e.next=9;break}n(),r(),e.next=13;break;case 9:return e.next=11,t.json();case 11:a=e.sent,l(a.message);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(y.jsx)("div",{children:Object(y.jsxs)(ce.a,{open:t,onClose:n,fullWidth:!0,children:[Object(y.jsx)(se.a,{children:"Delete Bill"}),Object(y.jsxs)(ie.a,{children:[Object(y.jsx)("div",{style:{padding:"15px"},children:"Are you sure you want to delete this account? this action is permanently"}),Object(y.jsx)("div",{style:{padding:"15px"},children:o&&Object(y.jsx)(re,{error:o,handleClose:function(){return l(null)}})})]}),Object(y.jsxs)(le.a,{children:[Object(y.jsx)(k.a,{onClick:n,children:"Cancel"}),Object(y.jsx)(k.a,{onClick:u,children:"Confirm"})]})]})})}function Oe(){var e=Object(a.useContext)(w),t=e.user,n=e.logout,c=Object(j.g)(),s=Object(a.useState)([]),i=Object(p.a)(s,2),o=i[0],l=i[1],u=Object(a.useState)(null),b=Object(p.a)(u,2),d=b[0],h=b[1],f=Object(a.useState)(!1),m=Object(p.a)(f,2),g=m[0],C=m[1],S=Object(a.useState)(!1),B=Object(p.a)(S,2),N=B[0],U=B[1],_=Object(a.useState)(!1),K=Object(p.a)(_,2),L=K[0],q=K[1],J=Object(a.useState)(null),V=Object(p.a)(J,2),z=V[0],F=V[1];Object(a.useEffect)((function(){t||c.push("/sign-in"),R()}),[c,t]);var R=function(){var e=Object(O.a)(x.a.mark((function e(){var t,a,r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(""),e.next=3,v("/api/v1/bills","GET");case 3:if(200!==(t=e.sent).status){e.next=12;break}return e.next=7,t.json();case 7:a=e.sent,console.log(a),l(a),e.next=20;break;case 12:if(401!==t.status){e.next=16;break}n(),e.next=20;break;case 16:return e.next=18,t.json();case 18:r=e.sent,h(r.message);case 20:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(y.jsxs)(ee,{title:"Index",children:[d&&Object(y.jsx)(re,{error:d,handleClose:function(){return h(null)}}),Object(y.jsx)("div",{children:Object(y.jsx)(k.a,{onClick:function(){return C(!0)},variant:"contained",sx:{display:"inline-block",mt:1,ml:2},children:"New"})}),o.length>0?Object(y.jsx)(E.a,{sx:{width:"100%"},children:o.map((function(e){var t=Object(P.a)(new Date(e.expire_date),"dd/MM/yyyy");return Object(y.jsx)(I.a,{secondaryAction:[Object(y.jsx)(D.a,{children:Object(y.jsx)(A.a,{onClick:function(){U(!0),F(e)}})}),Object(y.jsx)(D.a,{children:Object(y.jsx)(M.a,{onClick:function(){q(!0),F(e)}})})],children:Object(y.jsx)(T.a,{primary:"".concat(t," - ").concat(e.value," "),secondary:Object(y.jsx)(r.a.Fragment,{children:e.description})})})}))}):Object(y.jsx)(W.a,{sx:{mt:2},children:"No bills found, create a new now"}),g&&Object(y.jsx)(de,{reload:function(){return R()},open:g,handleClose:function(){return C(!1)}}),N&&Object(y.jsx)(de,{reload:function(){return R()},open:N,bill:z,edit:!0,handleClose:function(){return U(!1)}}),L&&Object(y.jsx)(xe,{reload:function(){return R()},open:L,bill:z,handleClose:function(){return q(!1)}})]})}var pe=n(267),he=n(99);function fe(){var e=Object(a.useState)(""),t=Object(p.a)(e,2),n=t[0],r=t[1],c=Object(he.a)(),s=c.register,o=c.handleSubmit,l=Object(a.useContext)(w),u=l.signIn,d=l.user,h=Object(j.g)();function f(){return(f=Object(O.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u(t);case 3:h.push("/"),e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0),r(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}return Object(a.useEffect)((function(){d&&h.push("/")}),[]),Object(y.jsx)(ee,{title:"Login",children:Object(y.jsx)(W.a,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:Object(y.jsxs)(W.a,{component:"form",onSubmit:o((function(e){return f.apply(this,arguments)})),sx:$.isBrowser?{mt:1,width:"70%"}:{mt:1,width:"90%"},noValidate:!0,children:[Object(y.jsx)(oe.a,Object(i.a)({margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0},s("email"))),Object(y.jsx)(oe.a,Object(i.a)(Object(i.a)({},s("password")),{},{margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password"})),Object(y.jsx)(k.a,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"Sign In"}),Object(y.jsx)(pe.a,{href:"/sign-up",variant:"body2",children:Object(y.jsx)(b.b,{to:"/sign-up",style:{textDecoration:"none",color:"inherit"},children:"Don't have an account? Sign Up"})}),n&&Object(y.jsx)(re,{error:n,handleClose:function(){return r(null)}})]})})})}function me(){var e=Object(a.useState)(null),t=Object(p.a)(e,2),n=t[0],r=t[1],c=Object(he.a)(),s=c.register,o=c.handleSubmit,l=Object(j.g)(),u=Object(a.useContext)(w),d=u.user,h=u.signIn;function f(){return(f=Object(O.a)(x.a.mark((function e(t){var n,a,c,s,i;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.name,a=t.email,c=t.password,r(""),e.next=4,v("/api/v1/register","POST",{name:n,email:a,password:c});case 4:if(200!==(s=e.sent).status){e.next=11;break}return e.next=8,h({email:a,password:c});case 8:l.push("/"),e.next=15;break;case 11:return e.next=13,s.json();case 13:i=e.sent,r(i.message);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){d&&l.push("/")}),[]),Object(y.jsx)(ee,{title:"Login",children:Object(y.jsx)(W.a,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:Object(y.jsxs)(W.a,{component:"form",onSubmit:o((function(e){return f.apply(this,arguments)})),noValidate:!0,sx:$.isBrowser?{mt:1,width:"70%"}:{mt:1,width:"90%"},children:[Object(y.jsx)(oe.a,Object(i.a)({margin:"normal",required:!0,fullWidth:!0,id:"name",label:"Name",name:"name",autoComplete:"name",autoFocus:!0},s("name"))),Object(y.jsx)(oe.a,Object(i.a)({margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email"},s("email"))),Object(y.jsx)(oe.a,Object(i.a)({margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password"},s("password"))),Object(y.jsx)(k.a,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"Sign Up"}),Object(y.jsx)(pe.a,{variant:"body2",children:Object(y.jsx)(b.b,{to:"/sign-in",style:{textDecoration:"none",color:"inherit"},children:"Already have an account? Sign in"})}),n&&Object(y.jsx)(re,{error:n,handleClose:function(){return r(null)}})]})})})}n(180);function ve(e){var t=e.component,n=Object(o.a)(e,["component"]),r=Object(a.useContext)(w).user;return Object(y.jsx)(j.b,Object(i.a)(Object(i.a)({},n),{},{render:function(e){return r?Object(y.jsx)(t,Object(i.a)({},e)):Object(y.jsx)(j.a,{to:{pathname:"/sign-in",state:{from:e.location}}})}}))}function ge(){var e=Object(l.a)({palette:{mode:"dark"}});return Object(y.jsxs)(u.a,{theme:e,children:[Object(y.jsx)(S.a,{}),Object(y.jsx)(C,{children:Object(y.jsx)(b.a,{children:Object(y.jsxs)(j.d,{children:[Object(y.jsx)(ve,{path:"/",component:Oe,exact:!0}),Object(y.jsx)(j.b,{path:"/sign-in",component:fe,exact:!0}),Object(y.jsx)(j.b,{path:"/sign-up",component:me,exact:!0})]})})})]})}s.a.render(Object(y.jsx)(r.a.StrictMode,{children:Object(y.jsx)(ge,{})}),document.getElementById("root"))}},[[181,1,2]]]);
//# sourceMappingURL=main.e58aceb4.chunk.js.map