(this.webpackJsonpreactapp=this.webpackJsonpreactapp||[]).push([[0],{131:function(e,t,n){},132:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(33),s=n.n(c),i=n(26),o=n(99),l=n(98),u=n(183),j=n(16),b=n(42),d=n(15),p=n.n(d),x=n(18),m=n(13),O=function(){return localStorage.getItem("TOKEN_KEY")},h=function(e){return localStorage.setItem("TOKEN_KEY",e)},f=function(e){return localStorage.setItem("USER",JSON.stringify(e))};function g(e,t,n){return v.apply(this,arguments)}function v(){return(v=Object(x.a)(p.a.mark((function e(t,n,a){var r,c,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={Accept:"application/json","Content-Type":"application/json"},(c=O())&&(r.Authorization="Bearer ".concat(c)),e.next=5,fetch("".concat(t),{headers:r,method:n,body:JSON.stringify(a)});case 5:return s=e.sent,e.abrupt("return",s);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var w=n(2),y=Object(a.createContext)({});function S(e){var t=e.children,n=Object(a.useState)(JSON.parse(localStorage.getItem("USER"))),r=Object(m.a)(n,2),c=r[0],s=r[1];function i(){return(i=Object(x.a)(p.a.mark((function e(t){var n,a,r,c,i,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.email,a=t.password,e.prev=1,e.next=4,g("/api/v1/login","POST",{email:n,password:a});case 4:if(200!==(r=e.sent).status){e.next=16;break}return e.next=8,r.json();case 8:c=e.sent,i=c.user,o=c.token,f(i),h(o),s(i),e.next=20;break;case 16:return e.next=18,r.json();case 18:throw e.sent.message;case 20:e.next=25;break;case 22:throw e.prev=22,e.t0=e.catch(1),e.t0;case 25:case"end":return e.stop()}}),e,null,[[1,22]])})))).apply(this,arguments)}return Object(w.jsx)(y.Provider,{value:{user:c,signIn:function(e){return i.apply(this,arguments)},logout:function(){localStorage.removeItem("TOKEN_KEY"),localStorage.removeItem("USER"),s(null)}},children:t})}var C=n(175),k=n(180),E=n(171),I=n(185),T=n(187),W=n(188),N=n(189),P=n(190),K=n(97),M=n(191),q=n(77),z=n.n(q),J=n(93),A=n.n(J),B=n(95),D=n.n(B),L=n(94),U=n.n(L),V=n(92),R=n.n(V),Y=n(72),_=function(e){var t=e.children,n=e.title,r=Object(a.useContext)(y),c=r.logout,s=r.user,i=Object(j.g)(),o=Object(a.useState)(null),l=Object(m.a)(o,2),u=l[0],d=l[1],p=Boolean(u),x=function(e){d(e.currentTarget)},O=function(){d(null)};document.title="My Expenses "+n;var h=[Object(w.jsxs)(k.a,{onClick:function(){return console.log("need implementation")},children:[Object(w.jsx)(E.a,{children:Object(w.jsx)(R.a,{})}),"Profile"]}),Object(w.jsxs)(k.a,{onClick:function(){c(),i.push("/sign-in")},children:[Object(w.jsx)(E.a,{children:Object(w.jsx)(A.a,{})}),"Logout"]})],f=[Object(w.jsxs)(k.a,{onClick:O,children:[Object(w.jsx)(E.a,{children:Object(w.jsx)(U.a,{})}),Object(w.jsx)(b.b,{to:"/sign-up",style:{textDecoration:"none",color:"inherit"},children:"Sign Up"})]}),Object(w.jsxs)(k.a,{onClick:O,children:[Object(w.jsx)(E.a,{children:Object(w.jsx)(D.a,{})}),Object(w.jsx)(b.b,{to:"/sign-in",style:{textDecoration:"none",color:"inherit"},children:"Sign In"})]})];return Object(w.jsxs)("div",{children:[Object(w.jsx)(Y.BrowserView,{children:Object(w.jsx)(I.a,{position:"static",children:Object(w.jsxs)(T.a,{children:[Object(w.jsxs)(W.a,{variant:"h6",component:"div",sx:{flexGrow:1},children:["My Expenses ",s&&" - ".concat(s.name)]}),Object(w.jsx)(N.a,{size:"large",edge:"start",color:"inherit","aria-label":"menu",sx:{mr:2},"aria-controls":"basic-menu","aria-haspopup":"true","aria-expanded":p?"true":void 0,onClick:x,children:Object(w.jsx)(z.a,{})})]})})}),Object(w.jsxs)(Y.MobileView,{children:[Object(w.jsx)(I.a,{position:"static",children:Object(w.jsx)(T.a,{children:Object(w.jsxs)(W.a,{variant:"h6",align:"center",component:"div",sx:{flexGrow:1},children:["My Expenses ",s&&" - ".concat(s.name)]})})}),Object(w.jsx)(P.a,{size:"small",color:"primary","aria-label":"add",style:{margin:0,top:"auto",right:20,bottom:20,left:"auto",position:"fixed"},id:"basic-button","aria-controls":"basic-menu","aria-haspopup":"true","aria-expanded":p?"true":void 0,onClick:x,children:Object(w.jsx)(z.a,{})})]}),Object(w.jsx)(K.a,{id:"basic-menu",anchorEl:u,open:p,onClose:O,MenuListProps:{"aria-labelledby":"basic-button"},children:s?h.map((function(e){return e})):f.map((function(e){return e}))}),Object(w.jsx)(M.a,{component:"main",maxWidth:"xs",children:t})]})};function F(){var e=Object(a.useContext)(y),t=(e.signIn,e.user),n=Object(j.g)();return Object(a.useEffect)((function(){t||n.push("/sign-in")}),[]),Object(w.jsx)(_,{title:"Index"})}var G=n(181),H=n(176),Q=n(182),X=n(184),Z=n(60),$=n(178),ee=n(96),te=n.n(ee),ne=function(e){var t=e.type,n=void 0===t?"error":t,a=e.error,r=e.handleClose;return Object(w.jsx)($.a,{action:Object(w.jsx)(N.a,{"aria-label":"close",color:"inherit",size:"small",onClick:r,children:Object(w.jsx)(te.a,{fontSize:"inherit"})}),severity:n,children:a})};function ae(){var e=Object(a.useState)(""),t=Object(m.a)(e,2),n=t[0],r=t[1],c=Object(Z.a)(),s=c.register,o=c.handleSubmit,l=Object(a.useContext)(y),u=l.signIn,b=l.user,d=Object(j.g)();function O(){return(O=Object(x.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u(t);case 3:d.push("/"),e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0),r(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}return Object(a.useEffect)((function(){b&&d.push("/")}),[]),Object(w.jsx)(_,{title:"Login",children:Object(w.jsx)(X.a,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:Object(w.jsxs)(X.a,{component:"form",onSubmit:o((function(e){return O.apply(this,arguments)})),noValidate:!0,sx:{mt:1},children:[Object(w.jsx)(H.a,Object(i.a)({margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0},s("email"))),Object(w.jsx)(H.a,Object(i.a)(Object(i.a)({},s("password")),{},{margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password"})),Object(w.jsx)(G.a,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"Sign In"}),Object(w.jsx)(Q.a,{width:"100%",children:n&&Object(w.jsx)(ne,{error:n,handleClose:function(){return r(null)}})})]})})})}function re(){var e=Object(a.useState)(null),t=Object(m.a)(e,2),n=t[0],r=t[1],c=Object(Z.a)(),s=c.register,o=c.handleSubmit,l=Object(j.g)(),u=Object(a.useContext)(y),b=u.user,d=u.signIn;function O(){return(O=Object(x.a)(p.a.mark((function e(t){var n,a,c,s,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.name,a=t.email,c=t.password,r(""),e.next=4,g("/api/v1/register","POST",{name:n,email:a,password:c});case 4:if(200!==(s=e.sent).status){e.next=11;break}return e.next=8,d({email:a,password:c});case 8:l.push("/"),e.next=15;break;case 11:return e.next=13,s.json();case 13:i=e.sent,r(i.message);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){b&&l.push("/")}),[]),Object(w.jsx)(_,{title:"Login",children:Object(w.jsx)(X.a,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:Object(w.jsxs)(X.a,{component:"form",onSubmit:o((function(e){return O.apply(this,arguments)})),noValidate:!0,sx:{mt:1},children:[Object(w.jsx)(H.a,Object(i.a)({margin:"normal",required:!0,fullWidth:!0,id:"name",label:"Name",name:"name",autoComplete:"name",autoFocus:!0},s("name"))),Object(w.jsx)(H.a,Object(i.a)({margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email"},s("email"))),Object(w.jsx)(H.a,Object(i.a)({margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password"},s("password"))),Object(w.jsx)(G.a,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"Sign In"}),Object(w.jsx)(Q.a,{width:"100%",children:n&&Object(w.jsx)(ne,{error:n,handleClose:function(){return r(null)}})})]})})})}n(131);function ce(e){var t=e.component,n=Object(o.a)(e,["component"]),r=Object(a.useContext)(y).user;return Object(w.jsx)(j.b,Object(i.a)(Object(i.a)({},n),{},{render:function(e){return r?Object(w.jsx)(t,Object(i.a)({},e)):Object(w.jsx)(j.a,{to:{pathname:"/sign-in",state:{from:e.location}}})}}))}function se(){var e=Object(l.a)({palette:{mode:"dark"}});return Object(w.jsxs)(u.a,{theme:e,children:[Object(w.jsx)(C.a,{}),Object(w.jsx)(S,{children:Object(w.jsx)(b.a,{children:Object(w.jsxs)(j.d,{children:[Object(w.jsx)(ce,{path:"/",component:F,exact:!0}),Object(w.jsx)(j.b,{path:"/sign-in",component:ae,exact:!0}),Object(w.jsx)(j.b,{path:"/sign-up",component:re,exact:!0})]})})})]})}s.a.render(Object(w.jsx)(r.a.StrictMode,{children:Object(w.jsx)(se,{})}),document.getElementById("root"))}},[[132,1,2]]]);
//# sourceMappingURL=main.f694701a.chunk.js.map